---
import Icon from '../atoms/Icon.astro'
import { _transition } from '../scripts/snips'

const
    {
        class: classes, ...props
    } = Astro.props
---
<div class="relative size-full flex items-center">
    <div class="absolute left-1.5 sm:left-3">
        <Icon name="search" class:list="w-6 text-surface-400"/>
    </div>
    <input
        type="search"
        class:list={[
            `
                block size-full pl-9 sm:pl-11 peer
                text-surface-800
                border-0 border-b-2 border-surface-300 focus:border-accent-600
                placeholder:text-surface-600
                search-cancel:appearance-none
            `,
            _transition(),
            classes
        ]}
        placeholder="Search by product name..."
        { ...props }
    >
    <button
        class:list={[
            `absolute right-1.5 sm:right-3 peer-placeholder-shown:opacity-0 peer-placeholder-shown:scale-0 scale-100`,
            _transition()
        ]} data-clear>
        <Icon name="close-x-fill" class:list="w-6 text-surface-500"/>
    </button>
</div>